{"version":3,"file":"index-BMkeJGZ3.js","sources":["../../src/components/concurrency/global-concurrency-limits/global-concurrency-limits-data-table/actions-cell.tsx","../../src/components/concurrency/global-concurrency-limits/global-concurrency-limits-data-table/active-cell.tsx","../../src/components/concurrency/global-concurrency-limits/global-concurrency-limits-data-table/global-concurrency-limits-data-table.tsx","../../src/components/concurrency/global-concurrency-limits/global-concurrency-limits-empty-state/global-concurrency-limits-empty-state.tsx","../../src/components/concurrency/global-concurrency-limits/global-concurrency-limits-header/global-concurrency-limits-header.tsx","../../src/components/concurrency/global-concurrency-limits/global-concurrency-limits-create-or-edit-dialog/use-create-or-edit-global-concurrency-limit-form.ts","../../src/components/concurrency/global-concurrency-limits/global-concurrency-limits-create-or-edit-dialog/global-concurrency-limits-create-or-edit-dialog.tsx","../../src/components/concurrency/global-concurrency-limits/global-concurrency-limits-delete-dialog/global-concurrency-limits-delete-dialog.tsx","../../src/components/concurrency/global-concurrency-limits/global-concurrency-limits-view/global-conccurency-limits-dialog.tsx","../../src/components/concurrency/global-concurrency-limits/global-concurrency-limits-view/index.tsx","../../src/components/concurrency/task-run-concurrency-limits/task-run-concurrency-limits-data-table/active-task-runs-cell.tsx","../../src/components/concurrency/task-run-concurrency-limits/task-run-concurrency-limits-data-table/tag-cell.tsx","../../src/components/concurrency/task-run-concurrency-limits/task-run-concurrency-limits-data-table/task-run-concurrency-limits-data-table.tsx","../../src/components/concurrency/task-run-concurrency-limits/task-run-concurrency-limits-empty-state/task-run-concurrency-limits-empty-state.tsx","../../src/components/concurrency/task-run-concurrency-limits/task-run-concurrency-limits-header/task-run-concurrency-limits-header.tsx","../../src/components/concurrency/task-run-concurrency-limits/task-run-concurrency-limits-create-dialog/task-run-concurrency-limits-create-dialog.tsx","../../src/components/concurrency/task-run-concurrency-limits/task-run-concurrency-limits-view/task-run-concurrency-limit-dialog.tsx","../../src/components/concurrency/task-run-concurrency-limits/task-run-concurrency-limits-view/index.tsx","../../src/components/concurrency/concurrency-limits-tabs.tsx","../../src/components/concurrency/concurrency-limits-page.tsx","../../src/routes/concurrency-limits/index.tsx?tsr-split=component"],"sourcesContent":["import type { CellContext } from \"@tanstack/react-table\";\nimport { toast } from \"sonner\";\nimport type { GlobalConcurrencyLimit } from \"@/api/global-concurrency-limits\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n\tDropdownMenu,\n\tDropdownMenuContent,\n\tDropdownMenuItem,\n\tDropdownMenuLabel,\n\tDropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { Icon } from \"@/components/ui/icons\";\n\ntype ActionsCellProps = CellContext<GlobalConcurrencyLimit, unknown> & {\n\tonEditRow: (row: GlobalConcurrencyLimit) => void;\n\tonDeleteRow: (row: GlobalConcurrencyLimit) => void;\n};\n\nexport const ActionsCell = ({\n\tonEditRow,\n\tonDeleteRow,\n\t...props\n}: ActionsCellProps) => {\n\tconst handleCopyId = (id: string) => {\n\t\tvoid navigator.clipboard.writeText(id);\n\t\ttoast.success(\"ID copied\");\n\t};\n\n\tconst row = props.row.original;\n\n\treturn (\n\t\t<DropdownMenu>\n\t\t\t<DropdownMenuTrigger asChild>\n\t\t\t\t<Button variant=\"outline\" className=\"size-8 p-0\">\n\t\t\t\t\t<span className=\"sr-only\">Open menu</span>\n\t\t\t\t\t<Icon id=\"MoreVertical\" className=\"size-4\" />\n\t\t\t\t</Button>\n\t\t\t</DropdownMenuTrigger>\n\t\t\t<DropdownMenuContent align=\"end\">\n\t\t\t\t<DropdownMenuLabel>Actions</DropdownMenuLabel>\n\t\t\t\t<DropdownMenuItem onClick={() => handleCopyId(row.id)}>\n\t\t\t\t\tCopy ID\n\t\t\t\t</DropdownMenuItem>\n\t\t\t\t<DropdownMenuItem onClick={() => onDeleteRow(row)}>\n\t\t\t\t\tDelete\n\t\t\t\t</DropdownMenuItem>\n\t\t\t\t<DropdownMenuItem onClick={() => onEditRow(row)}>Edit</DropdownMenuItem>\n\t\t\t</DropdownMenuContent>\n\t\t</DropdownMenu>\n\t);\n};\n","import type { CellContext } from \"@tanstack/react-table\";\nimport { toast } from \"sonner\";\nimport {\n\ttype GlobalConcurrencyLimit,\n\tuseUpdateGlobalConcurrencyLimit,\n} from \"@/api/global-concurrency-limits\";\nimport { Switch } from \"@/components/ui/switch\";\n\nexport const ActiveCell = (\n\tprops: CellContext<GlobalConcurrencyLimit, boolean>,\n) => {\n\tconst { updateGlobalConcurrencyLimit } = useUpdateGlobalConcurrencyLimit();\n\n\tconst handleCheckedChange = (checked: boolean, id: string) => {\n\t\tupdateGlobalConcurrencyLimit(\n\t\t\t{\n\t\t\t\tid_or_name: id,\n\t\t\t\tactive: checked,\n\t\t\t},\n\t\t\t{\n\t\t\t\tonSuccess: () => {\n\t\t\t\t\ttoast.success(\"Concurrency limit updated\");\n\t\t\t\t},\n\t\t\t\tonError: (error) => {\n\t\t\t\t\tconst message =\n\t\t\t\t\t\terror.message || \"Unknown error while updating active field.\";\n\t\t\t\t\tconsole.error(message);\n\t\t\t\t},\n\t\t\t},\n\t\t);\n\t};\n\n\tconst rowActive = props.getValue();\n\tconst rowId = props.row.original.id;\n\n\treturn (\n\t\t<Switch\n\t\t\taria-label=\"toggle active\"\n\t\t\tchecked={rowActive}\n\t\t\tonCheckedChange={(checked) => handleCheckedChange(checked, rowId)}\n\t\t/>\n\t);\n};\n","import { getRouteApi } from \"@tanstack/react-router\";\nimport {\n\tcreateColumnHelper,\n\tgetCoreRowModel,\n\tgetPaginationRowModel,\n\tuseReactTable,\n} from \"@tanstack/react-table\";\nimport { useDeferredValue, useMemo } from \"react\";\nimport type { GlobalConcurrencyLimit } from \"@/api/global-concurrency-limits\";\nimport { DataTable } from \"@/components/ui/data-table\";\nimport { SearchInput } from \"@/components/ui/input\";\nimport { ActionsCell } from \"./actions-cell\";\nimport { ActiveCell } from \"./active-cell\";\n\nconst routeApi = getRouteApi(\"/concurrency-limits/\");\n\nconst columnHelper = createColumnHelper<GlobalConcurrencyLimit>();\n\nconst createColumns = ({\n\tonEditRow,\n\tonDeleteRow,\n}: {\n\tonEditRow: (row: GlobalConcurrencyLimit) => void;\n\tonDeleteRow: (row: GlobalConcurrencyLimit) => void;\n}) => [\n\tcolumnHelper.accessor(\"name\", {\n\t\theader: \"Name\",\n\t}),\n\tcolumnHelper.accessor(\"limit\", {\n\t\theader: \"Limit\",\n\t}),\n\tcolumnHelper.accessor(\"active_slots\", {\n\t\theader: \"Active Slots\",\n\t}),\n\tcolumnHelper.accessor(\"slot_decay_per_second\", {\n\t\theader: \"Slots Decay Per Second\",\n\t}),\n\tcolumnHelper.accessor(\"active\", {\n\t\theader: \"Active\",\n\t\tcell: ActiveCell,\n\t}),\n\tcolumnHelper.display({\n\t\tid: \"actions\",\n\t\tcell: (props) => (\n\t\t\t<div className=\"flex flex-row justify-end\">\n\t\t\t\t<ActionsCell\n\t\t\t\t\t{...props}\n\t\t\t\t\tonEditRow={onEditRow}\n\t\t\t\t\tonDeleteRow={onDeleteRow}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t),\n\t}),\n];\n\ntype GlobalConcurrencyLimitsDataTableProps = {\n\tdata: Array<GlobalConcurrencyLimit>;\n\tonEditRow: (row: GlobalConcurrencyLimit) => void;\n\tonDeleteRow: (row: GlobalConcurrencyLimit) => void;\n};\n\nexport const GlobalConcurrencyLimitsDataTable = ({\n\tdata,\n\tonEditRow,\n\tonDeleteRow,\n}: GlobalConcurrencyLimitsDataTableProps) => {\n\tconst navigate = routeApi.useNavigate();\n\tconst { search } = routeApi.useSearch();\n\tconst deferredSearch = useDeferredValue(search ?? \"\");\n\n\tconst filteredData = useMemo(() => {\n\t\treturn data.filter((row) =>\n\t\t\trow.name.toLowerCase().includes(deferredSearch.toLowerCase()),\n\t\t);\n\t}, [data, deferredSearch]);\n\n\treturn (\n\t\t<Table\n\t\t\tdata={filteredData}\n\t\t\tonDeleteRow={onDeleteRow}\n\t\t\tonEditRow={onEditRow}\n\t\t\tsearchValue={search}\n\t\t\tonSearchChange={(value) =>\n\t\t\t\tvoid navigate({\n\t\t\t\t\tto: \".\",\n\t\t\t\t\tsearch: (prev) => ({ ...prev, search: value }),\n\t\t\t\t})\n\t\t\t}\n\t\t/>\n\t);\n};\n\ntype TableProps = {\n\tdata: Array<GlobalConcurrencyLimit>;\n\tonDeleteRow: (row: GlobalConcurrencyLimit) => void;\n\tonEditRow: (row: GlobalConcurrencyLimit) => void;\n\tonSearchChange: (value: string) => void;\n\tsearchValue: string | undefined;\n};\n\nexport function Table({\n\tdata,\n\tonDeleteRow,\n\tonEditRow,\n\tonSearchChange,\n\tsearchValue,\n}: TableProps) {\n\tconst table = useReactTable({\n\t\tdata,\n\t\tcolumns: createColumns({ onDeleteRow, onEditRow }),\n\t\tgetCoreRowModel: getCoreRowModel(),\n\t\tgetPaginationRowModel: getPaginationRowModel(), //load client-side pagination code\n\t});\n\n\treturn (\n\t\t<div className=\"flex flex-col gap-4\">\n\t\t\t<SearchInput\n\t\t\t\tclassName=\"max-w-72\"\n\t\t\t\tplaceholder=\"Search global concurrency limit\"\n\t\t\t\tvalue={searchValue}\n\t\t\t\tonChange={(e) => onSearchChange(e.target.value)}\n\t\t\t/>\n\t\t\t<DataTable table={table} />\n\t\t</div>\n\t);\n}\n","import { Button } from \"@/components/ui/button\";\nimport { DocsLink } from \"@/components/ui/docs-link\";\nimport {\n\tEmptyState,\n\tEmptyStateActions,\n\tEmptyStateDescription,\n\tEmptyStateIcon,\n\tEmptyStateTitle,\n} from \"@/components/ui/empty-state\";\nimport { Icon } from \"@/components/ui/icons\";\n\ntype GlobalConcurrencyLimitsEmptyStateProps = {\n\tonAdd: () => void;\n};\nexport const GlobalConcurrencyLimitsEmptyState = ({\n\tonAdd,\n}: GlobalConcurrencyLimitsEmptyStateProps) => (\n\t<EmptyState>\n\t\t<EmptyStateIcon id=\"AlignVerticalJustifyStart\" />\n\t\t<EmptyStateTitle>Add a concurrency limit</EmptyStateTitle>\n\t\t<EmptyStateDescription>\n\t\t\tGlobal concurrency limits can be applied to flow runs, task runs and any\n\t\t\toperation where you want to control concurrency.\n\t\t</EmptyStateDescription>\n\t\t<EmptyStateActions>\n\t\t\t<Button onClick={onAdd}>\n\t\t\t\tAdd Concurrency Limit <Icon id=\"Plus\" className=\"size-4 ml-2\" />\n\t\t\t</Button>\n\t\t\t<DocsLink id=\"global-concurrency-guide\" />\n\t\t</EmptyStateActions>\n\t</EmptyState>\n);\n","import { Button } from \"@/components/ui/button\";\nimport { Icon } from \"@/components/ui/icons\";\nimport { Typography } from \"@/components/ui/typography\";\n\ntype GlobalConcurrencyLimitsHeaderProps = {\n\tonAdd: () => void;\n};\n\nexport const GlobalConcurrencyLimitsHeader = ({\n\tonAdd,\n}: GlobalConcurrencyLimitsHeaderProps) => {\n\treturn (\n\t\t<div className=\"flex gap-2 items-center\">\n\t\t\t<Typography className=\"font-semibold\">\n\t\t\t\tGlobal Concurrency Limits\n\t\t\t</Typography>\n\t\t\t<Button\n\t\t\t\tonClick={onAdd}\n\t\t\t\tsize=\"icon\"\n\t\t\t\tclassName=\"size-7\"\n\t\t\t\tvariant=\"outline\"\n\t\t\t\taria-label=\"add global concurrency limit\"\n\t\t\t>\n\t\t\t\t<Icon id=\"Plus\" className=\"size-4\" />\n\t\t\t</Button>\n\t\t</div>\n\t);\n};\n","import { zodResolver } from \"@hookform/resolvers/zod\";\nimport { useEffect } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { toast } from \"sonner\";\nimport { z } from \"zod\";\nimport {\n\ttype GlobalConcurrencyLimit,\n\tuseCreateGlobalConcurrencyLimit,\n\tuseUpdateGlobalConcurrencyLimit,\n} from \"@/api/global-concurrency-limits\";\n\nconst formSchema = z.object({\n\tactive: z.boolean().default(true),\n\t/** Coerce to solve common issue of transforming a string number to a number type */\n\tdenied_slots: z.number().default(0).or(z.string()).pipe(z.coerce.number()),\n\t/** Coerce to solve common issue of transforming a string number to a number type */\n\tlimit: z.number().default(0).or(z.string()).pipe(z.coerce.number()),\n\tname: z\n\t\t.string()\n\t\t.min(2, { message: \"Name must be at least 2 characters\" })\n\t\t.default(\"\"),\n\t/** Coerce to solve common issue of transforming a string number to a number type */\n\tslot_decay_per_second: z\n\t\t.number()\n\t\t.default(0)\n\t\t.or(z.string())\n\t\t.pipe(z.coerce.number()),\n\t/** Additional fields post creation. Coerce to solve common issue of transforming a string number to a number type  */\n\tactive_slots: z.number().default(0).or(z.string()).pipe(z.coerce.number()),\n});\n\nconst DEFAULT_VALUES = {\n\tactive: true,\n\tname: \"\",\n\tlimit: 0,\n\tslot_decay_per_second: 0,\n\tdenied_slots: 0,\n\tactive_slots: 0,\n} as const;\n\ntype UseCreateOrEditGlobalConcurrencyLimitFormOptions = {\n\t/** Limit to edit. Pass undefined if creating a new limit */\n\tlimitToUpdate: GlobalConcurrencyLimit | undefined;\n\t/** Callback after hitting Save or Update */\n\tonSubmit: () => void;\n};\n\nexport const useCreateOrEditGlobalConcurrencyLimitForm = ({\n\tlimitToUpdate,\n\tonSubmit,\n}: UseCreateOrEditGlobalConcurrencyLimitFormOptions) => {\n\tconst { createGlobalConcurrencyLimit, status: createStatus } =\n\t\tuseCreateGlobalConcurrencyLimit();\n\tconst { updateGlobalConcurrencyLimit, status: updateStatus } =\n\t\tuseUpdateGlobalConcurrencyLimit();\n\n\tconst form = useForm({\n\t\tresolver: zodResolver(formSchema),\n\t\tdefaultValues: DEFAULT_VALUES,\n\t});\n\n\t// Sync form data with limit-to-edit data\n\tuseEffect(() => {\n\t\tif (limitToUpdate) {\n\t\t\tconst { active, name, limit, slot_decay_per_second, active_slots } =\n\t\t\t\tlimitToUpdate;\n\t\t\tform.reset({ active, name, limit, slot_decay_per_second, active_slots });\n\t\t} else {\n\t\t\tform.reset(DEFAULT_VALUES);\n\t\t}\n\t}, [form, limitToUpdate]);\n\n\tconst saveOrUpdate = (values: z.infer<typeof formSchema>) => {\n\t\tconst onSettled = () => {\n\t\t\tform.reset(DEFAULT_VALUES);\n\t\t\tonSubmit();\n\t\t};\n\n\t\tif (limitToUpdate?.id) {\n\t\t\tupdateGlobalConcurrencyLimit(\n\t\t\t\t{\n\t\t\t\t\tid_or_name: limitToUpdate.id,\n\t\t\t\t\t...values,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tonSuccess: () => {\n\t\t\t\t\t\ttoast.success(\"Limit updated\");\n\t\t\t\t\t},\n\t\t\t\t\tonError: (error) => {\n\t\t\t\t\t\tconst message =\n\t\t\t\t\t\t\terror.message || \"Unknown error while updating limit.\";\n\t\t\t\t\t\tform.setError(\"root\", { message });\n\t\t\t\t\t},\n\t\t\t\t\tonSettled,\n\t\t\t\t},\n\t\t\t);\n\t\t} else {\n\t\t\tcreateGlobalConcurrencyLimit(values, {\n\t\t\t\tonSuccess: () => {\n\t\t\t\t\ttoast.success(\"Limit created\");\n\t\t\t\t},\n\t\t\t\tonError: (error) => {\n\t\t\t\t\tconst message =\n\t\t\t\t\t\terror.message || \"Unknown error while creating variable.\";\n\t\t\t\t\tform.setError(\"root\", {\n\t\t\t\t\t\tmessage,\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tonSettled,\n\t\t\t});\n\t\t}\n\t};\n\n\treturn {\n\t\tform,\n\t\tsaveOrUpdate,\n\t\tisLoading: createStatus === \"pending\" || updateStatus === \"pending\",\n\t};\n};\n","import type { GlobalConcurrencyLimit } from \"@/api/global-concurrency-limits\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n\tDialog,\n\tDialogContent,\n\tDialogFooter,\n\tDialogHeader,\n\tDialogTitle,\n\tDialogTrigger,\n} from \"@/components/ui/dialog\";\nimport {\n\tForm,\n\tFormControl,\n\tFormField,\n\tFormItem,\n\tFormLabel,\n\tFormMessage,\n} from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Switch } from \"@/components/ui/switch\";\n\nimport { useCreateOrEditGlobalConcurrencyLimitForm } from \"./use-create-or-edit-global-concurrency-limit-form\";\n\ntype GlobalConcurrencyLimitsCreateOrEditDialogProps = {\n\tlimitToUpdate?: GlobalConcurrencyLimit;\n\tonOpenChange: (open: boolean) => void;\n\tonSubmit: () => void;\n};\n\nexport const GlobalConcurrencyLimitsCreateOrEditDialog = ({\n\tlimitToUpdate,\n\tonOpenChange,\n\tonSubmit,\n}: GlobalConcurrencyLimitsCreateOrEditDialogProps) => {\n\tconst { form, isLoading, saveOrUpdate } =\n\t\tuseCreateOrEditGlobalConcurrencyLimitForm({\n\t\t\tlimitToUpdate,\n\t\t\tonSubmit,\n\t\t});\n\n\tconst dialogTitle = limitToUpdate\n\t\t? `Update ${limitToUpdate.name}`\n\t\t: \"Add Concurrency Limit\";\n\n\treturn (\n\t\t<Dialog open onOpenChange={onOpenChange}>\n\t\t\t<DialogContent aria-describedby={undefined}>\n\t\t\t\t<DialogHeader>\n\t\t\t\t\t<DialogTitle>{dialogTitle}</DialogTitle>\n\t\t\t\t</DialogHeader>\n\n\t\t\t\t<Form {...form}>\n\t\t\t\t\t<form\n\t\t\t\t\t\tonSubmit={(e) => void form.handleSubmit(saveOrUpdate)(e)}\n\t\t\t\t\t\tclassName=\"space-y-4\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<FormMessage>{form.formState.errors.root?.message}</FormMessage>\n\t\t\t\t\t\t<FormField\n\t\t\t\t\t\t\tcontrol={form.control}\n\t\t\t\t\t\t\tname=\"name\"\n\t\t\t\t\t\t\trender={({ field }) => (\n\t\t\t\t\t\t\t\t<FormItem>\n\t\t\t\t\t\t\t\t\t<FormLabel>Name</FormLabel>\n\t\t\t\t\t\t\t\t\t<FormControl>\n\t\t\t\t\t\t\t\t\t\t<Input type=\"text\" autoComplete=\"off\" {...field} />\n\t\t\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t\t\t\t<FormMessage />\n\t\t\t\t\t\t\t\t</FormItem>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<FormField\n\t\t\t\t\t\t\tcontrol={form.control}\n\t\t\t\t\t\t\tname=\"limit\"\n\t\t\t\t\t\t\trender={({ field }) => (\n\t\t\t\t\t\t\t\t<FormItem>\n\t\t\t\t\t\t\t\t\t<FormLabel>Concurrency Limit</FormLabel>\n\t\t\t\t\t\t\t\t\t<FormControl>\n\t\t\t\t\t\t\t\t\t\t<Input type=\"number\" {...field} />\n\t\t\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t\t\t\t<FormMessage />\n\t\t\t\t\t\t\t\t</FormItem>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<FormField\n\t\t\t\t\t\t\tcontrol={form.control}\n\t\t\t\t\t\t\tname=\"slot_decay_per_second\"\n\t\t\t\t\t\t\trender={({ field }) => (\n\t\t\t\t\t\t\t\t<FormItem>\n\t\t\t\t\t\t\t\t\t<FormLabel>Slot Decay Per Second</FormLabel>\n\t\t\t\t\t\t\t\t\t<FormControl>\n\t\t\t\t\t\t\t\t\t\t<Input type=\"number\" {...field} />\n\t\t\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t\t\t\t<FormMessage />\n\t\t\t\t\t\t\t\t</FormItem>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{limitToUpdate && (\n\t\t\t\t\t\t\t<FormField\n\t\t\t\t\t\t\t\tcontrol={form.control}\n\t\t\t\t\t\t\t\tname=\"active_slots\"\n\t\t\t\t\t\t\t\trender={({ field }) => (\n\t\t\t\t\t\t\t\t\t<FormItem>\n\t\t\t\t\t\t\t\t\t\t<FormLabel>Active Slots</FormLabel>\n\t\t\t\t\t\t\t\t\t\t<FormControl>\n\t\t\t\t\t\t\t\t\t\t\t<Input type=\"number\" {...field} />\n\t\t\t\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t\t\t\t\t<FormMessage />\n\t\t\t\t\t\t\t\t\t</FormItem>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<FormField\n\t\t\t\t\t\t\tcontrol={form.control}\n\t\t\t\t\t\t\tname=\"active\"\n\t\t\t\t\t\t\trender={({ field }) => (\n\t\t\t\t\t\t\t\t<FormItem>\n\t\t\t\t\t\t\t\t\t<FormLabel>Active</FormLabel>\n\t\t\t\t\t\t\t\t\t<FormControl>\n\t\t\t\t\t\t\t\t\t\t<Switch\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"block\"\n\t\t\t\t\t\t\t\t\t\t\tchecked={field.value}\n\t\t\t\t\t\t\t\t\t\t\tonCheckedChange={field.onChange}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t\t\t\t<FormMessage />\n\t\t\t\t\t\t\t\t</FormItem>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<DialogFooter>\n\t\t\t\t\t\t\t<DialogTrigger asChild>\n\t\t\t\t\t\t\t\t<Button variant=\"outline\">Close</Button>\n\t\t\t\t\t\t\t</DialogTrigger>\n\t\t\t\t\t\t\t<Button type=\"submit\" loading={isLoading}>\n\t\t\t\t\t\t\t\t{limitToUpdate ? \"Update\" : \"Save\"}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</DialogFooter>\n\t\t\t\t\t</form>\n\t\t\t\t</Form>\n\t\t\t</DialogContent>\n\t\t</Dialog>\n\t);\n};\n","import { toast } from \"sonner\";\nimport {\n\ttype GlobalConcurrencyLimit,\n\tuseDeleteGlobalConcurrencyLimit,\n} from \"@/api/global-concurrency-limits\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n\tDialog,\n\tDialogContent,\n\tDialogDescription,\n\tDialogFooter,\n\tDialogHeader,\n\tDialogTitle,\n\tDialogTrigger,\n} from \"@/components/ui/dialog\";\n\ntype GlobalConcurrencyLimitsDeleteDialogProps = {\n\tlimit: GlobalConcurrencyLimit;\n\tonOpenChange: (open: boolean) => void;\n\tonDelete: () => void;\n};\n\nexport const GlobalConcurrencyLimitsDeleteDialog = ({\n\tlimit,\n\tonOpenChange,\n\tonDelete,\n}: GlobalConcurrencyLimitsDeleteDialogProps) => {\n\tconst { deleteGlobalConcurrencyLimit, isPending } =\n\t\tuseDeleteGlobalConcurrencyLimit();\n\n\tconst handleOnClick = (id: string) => {\n\t\tdeleteGlobalConcurrencyLimit(id, {\n\t\t\tonSuccess: () => {\n\t\t\t\ttoast.success(\"Concurrency limit deleted\");\n\t\t\t},\n\t\t\tonError: (error) => {\n\t\t\t\tconst message =\n\t\t\t\t\terror.message || \"Unknown error while deleting concurrency limit.\";\n\t\t\t\tconsole.error(message);\n\t\t\t},\n\t\t\tonSettled: onDelete,\n\t\t});\n\t};\n\n\treturn (\n\t\t<Dialog open onOpenChange={onOpenChange}>\n\t\t\t<DialogContent>\n\t\t\t\t<DialogHeader>\n\t\t\t\t\t<DialogTitle>Delete Concurrency Limit</DialogTitle>\n\t\t\t\t</DialogHeader>\n\t\t\t\t<DialogDescription>\n\t\t\t\t\tAre you sure you want to delete {limit.name}\n\t\t\t\t</DialogDescription>\n\t\t\t\t<DialogFooter>\n\t\t\t\t\t<DialogTrigger asChild>\n\t\t\t\t\t\t<Button variant=\"outline\">Close</Button>\n\t\t\t\t\t</DialogTrigger>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"destructive\"\n\t\t\t\t\t\tonClick={() => handleOnClick(limit.id)}\n\t\t\t\t\t\tloading={isPending}\n\t\t\t\t\t>\n\t\t\t\t\t\tDelete\n\t\t\t\t\t</Button>\n\t\t\t\t</DialogFooter>\n\t\t\t</DialogContent>\n\t\t</Dialog>\n\t);\n};\n","import type { GlobalConcurrencyLimit } from \"@/api/global-concurrency-limits\";\n\nimport { GlobalConcurrencyLimitsCreateOrEditDialog } from \"@/components/concurrency/global-concurrency-limits/global-concurrency-limits-create-or-edit-dialog\";\nimport { GlobalConcurrencyLimitsDeleteDialog } from \"@/components/concurrency/global-concurrency-limits/global-concurrency-limits-delete-dialog\";\n\nexport type DialogState =\n\t| { dialog: null | \"create\"; data: undefined }\n\t| {\n\t\t\tdialog: \"delete\" | \"edit\";\n\t\t\tdata: GlobalConcurrencyLimit;\n\t  };\n\nexport const GlobalConcurrencyLimitsDialog = ({\n\topenDialog,\n\tonCloseDialog,\n\tonOpenChange,\n}: {\n\topenDialog: DialogState;\n\tonOpenChange: (open: boolean) => void;\n\tonCloseDialog: () => void;\n}) => {\n\tconst { dialog, data } = openDialog;\n\tswitch (dialog) {\n\t\tcase \"create\":\n\t\t\treturn (\n\t\t\t\t<GlobalConcurrencyLimitsCreateOrEditDialog\n\t\t\t\t\tonOpenChange={onOpenChange}\n\t\t\t\t\tonSubmit={onCloseDialog}\n\t\t\t\t/>\n\t\t\t);\n\t\tcase \"delete\":\n\t\t\treturn (\n\t\t\t\t<GlobalConcurrencyLimitsDeleteDialog\n\t\t\t\t\tlimit={data}\n\t\t\t\t\tonOpenChange={onOpenChange}\n\t\t\t\t\tonDelete={onCloseDialog}\n\t\t\t\t/>\n\t\t\t);\n\t\tcase \"edit\":\n\t\t\treturn (\n\t\t\t\t<GlobalConcurrencyLimitsCreateOrEditDialog\n\t\t\t\t\tonOpenChange={onOpenChange}\n\t\t\t\t\tlimitToUpdate={data}\n\t\t\t\t\tonSubmit={onCloseDialog}\n\t\t\t\t/>\n\t\t\t);\n\t\tdefault:\n\t\t\treturn null;\n\t}\n};\n","import { useState } from \"react\";\nimport {\n\ttype GlobalConcurrencyLimit,\n\tuseListGlobalConcurrencyLimits,\n} from \"@/api/global-concurrency-limits\";\n\nimport { GlobalConcurrencyLimitsDataTable } from \"@/components/concurrency/global-concurrency-limits/global-concurrency-limits-data-table\";\nimport { GlobalConcurrencyLimitsEmptyState } from \"@/components/concurrency/global-concurrency-limits/global-concurrency-limits-empty-state\";\nimport { GlobalConcurrencyLimitsHeader } from \"@/components/concurrency/global-concurrency-limits/global-concurrency-limits-header\";\n\nimport {\n\ttype DialogState,\n\tGlobalConcurrencyLimitsDialog,\n} from \"./global-conccurency-limits-dialog\";\n\nexport const GlobalConcurrencyLimitsView = () => {\n\tconst [openDialog, setOpenDialog] = useState<DialogState>({\n\t\tdialog: null,\n\t\tdata: undefined,\n\t});\n\n\tconst { data } = useListGlobalConcurrencyLimits();\n\n\tconst handleAddRow = () =>\n\t\tsetOpenDialog({ dialog: \"create\", data: undefined });\n\n\tconst handleEditRow = (data: GlobalConcurrencyLimit) =>\n\t\tsetOpenDialog({ dialog: \"edit\", data });\n\n\tconst handleDeleteRow = (data: GlobalConcurrencyLimit) =>\n\t\tsetOpenDialog({ dialog: \"delete\", data });\n\n\tconst handleCloseDialog = () =>\n\t\tsetOpenDialog({ dialog: null, data: undefined });\n\n\t// Because all modals will be rendered, only control the closing logic\n\tconst handleOpenChange = (open: boolean) => {\n\t\tif (!open) {\n\t\t\thandleCloseDialog();\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className=\"flex flex-col gap-4\">\n\t\t\t<GlobalConcurrencyLimitsHeader onAdd={handleAddRow} />\n\t\t\t{data.length === 0 ? (\n\t\t\t\t<GlobalConcurrencyLimitsEmptyState onAdd={handleAddRow} />\n\t\t\t) : (\n\t\t\t\t<GlobalConcurrencyLimitsDataTable\n\t\t\t\t\tdata={data}\n\t\t\t\t\tonEditRow={handleEditRow}\n\t\t\t\t\tonDeleteRow={handleDeleteRow}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t<GlobalConcurrencyLimitsDialog\n\t\t\t\topenDialog={openDialog}\n\t\t\t\tonCloseDialog={handleCloseDialog}\n\t\t\t\tonOpenChange={handleOpenChange}\n\t\t\t/>\n\t\t</div>\n\t);\n};\n","import type { CellContext } from \"@tanstack/react-table\";\nimport type { TaskRunConcurrencyLimit } from \"@/api/task-run-concurrency-limits\";\n\ntype ActiveTaskRunCellsProps = CellContext<\n\tTaskRunConcurrencyLimit,\n\tArray<string>\n>;\n\nexport const ActiveTaskRunCells = (props: ActiveTaskRunCellsProps) => {\n\tconst activeTaskRuns = props.getValue();\n\tconst numActiveTaskRuns = activeTaskRuns.length;\n\tif (numActiveTaskRuns === 0) {\n\t\treturn \"None\";\n\t}\n\treturn numActiveTaskRuns;\n};\n","import { Link } from \"@tanstack/react-router\";\nimport type { CellContext } from \"@tanstack/react-table\";\nimport type { TaskRunConcurrencyLimit } from \"@/api/task-run-concurrency-limits\";\n\ntype TagCellProps = CellContext<TaskRunConcurrencyLimit, string>;\n\nexport const TagCell = (props: TagCellProps) => {\n\tconst tag = props.getValue();\n\tconst id = props.row.original.id;\n\treturn (\n\t\t<Link params={{ id }} to={\"/concurrency-limits/concurrency-limit/$id\"}>\n\t\t\t{tag}\n\t\t</Link>\n\t);\n};\n","import { getRouteApi } from \"@tanstack/react-router\";\nimport {\n\tcreateColumnHelper,\n\tgetCoreRowModel,\n\tgetPaginationRowModel,\n\tuseReactTable,\n} from \"@tanstack/react-table\";\nimport { useDeferredValue, useMemo } from \"react\";\nimport type { TaskRunConcurrencyLimit } from \"@/api/task-run-concurrency-limits\";\nimport { TaskRunConcurrencyLimitsActionsMenu } from \"@/components/concurrency/task-run-concurrency-limits/task-run-concurrency-limits-actions-menu\";\nimport { DataTable } from \"@/components/ui/data-table\";\nimport { SearchInput } from \"@/components/ui/input\";\n\nimport { ActiveTaskRunCells } from \"./active-task-runs-cell\";\nimport { TagCell } from \"./tag-cell\";\n\nconst routeApi = getRouteApi(\"/concurrency-limits/\");\nconst columnHelper = createColumnHelper<TaskRunConcurrencyLimit>();\n\nconst createColumns = ({\n\tonDeleteRow,\n\tonResetRow,\n}: {\n\tonDeleteRow: (row: TaskRunConcurrencyLimit) => void;\n\tonResetRow: (row: TaskRunConcurrencyLimit) => void;\n}) => [\n\tcolumnHelper.accessor(\"tag\", {\n\t\theader: \"Tag\",\n\t\tcell: TagCell,\n\t}),\n\tcolumnHelper.accessor(\"concurrency_limit\", {\n\t\theader: \"Slots\",\n\t}),\n\tcolumnHelper.accessor(\"active_slots\", {\n\t\theader: \"Active Task Runs\",\n\t\tcell: ActiveTaskRunCells,\n\t}),\n\tcolumnHelper.display({\n\t\tid: \"actions\",\n\t\tcell: (props) => {\n\t\t\tconst row = props.row.original;\n\t\t\treturn (\n\t\t\t\t<div className=\"flex flex-row justify-end\">\n\t\t\t\t\t<TaskRunConcurrencyLimitsActionsMenu\n\t\t\t\t\t\tid={row.id}\n\t\t\t\t\t\tonDelete={() => onDeleteRow(row)}\n\t\t\t\t\t\tonReset={() => onResetRow(row)}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t);\n\t\t},\n\t}),\n];\n\ntype TaskRunConcurrencyLimitsDataTableProps = {\n\tdata: Array<TaskRunConcurrencyLimit>;\n\tonDeleteRow: (row: TaskRunConcurrencyLimit) => void;\n\tonResetRow: (row: TaskRunConcurrencyLimit) => void;\n};\n\nexport const TaskRunConcurrencyLimitsDataTable = ({\n\tdata,\n\tonDeleteRow,\n\tonResetRow,\n}: TaskRunConcurrencyLimitsDataTableProps) => {\n\tconst navigate = routeApi.useNavigate();\n\tconst { search } = routeApi.useSearch();\n\tconst deferredSearch = useDeferredValue(search ?? \"\");\n\n\tconst filteredData = useMemo(() => {\n\t\treturn data.filter((row) =>\n\t\t\trow.tag.toLowerCase().includes(deferredSearch.toLowerCase()),\n\t\t);\n\t}, [data, deferredSearch]);\n\n\treturn (\n\t\t<Table\n\t\t\tdata={filteredData}\n\t\t\tonDeleteRow={onDeleteRow}\n\t\t\tonResetRow={onResetRow}\n\t\t\tsearchValue={search}\n\t\t\tonSearchChange={(value) =>\n\t\t\t\tvoid navigate({\n\t\t\t\t\tto: \".\",\n\t\t\t\t\tsearch: (prev) => ({ ...prev, search: value }),\n\t\t\t\t})\n\t\t\t}\n\t\t/>\n\t);\n};\n\ntype TableProps = {\n\tdata: Array<TaskRunConcurrencyLimit>;\n\tonDeleteRow: (row: TaskRunConcurrencyLimit) => void;\n\tonResetRow: (row: TaskRunConcurrencyLimit) => void;\n\tonSearchChange: (value: string) => void;\n\tsearchValue: string | undefined;\n};\n\nexport function Table({\n\tdata,\n\tonDeleteRow,\n\tonResetRow,\n\tonSearchChange,\n\tsearchValue,\n}: TableProps) {\n\tconst table = useReactTable({\n\t\tdata,\n\t\tcolumns: createColumns({ onDeleteRow, onResetRow }),\n\t\tgetCoreRowModel: getCoreRowModel(),\n\t\tgetPaginationRowModel: getPaginationRowModel(), //load client-side pagination code\n\t});\n\n\treturn (\n\t\t<div className=\"flex flex-col gap-4\">\n\t\t\t<SearchInput\n\t\t\t\tclassName=\"max-w-72\"\n\t\t\t\tplaceholder=\"Search active task limit\"\n\t\t\t\tvalue={searchValue}\n\t\t\t\tonChange={(e) => onSearchChange(e.target.value)}\n\t\t\t/>\n\t\t\t<DataTable table={table} />\n\t\t</div>\n\t);\n}\n","import { Button } from \"@/components/ui/button\";\nimport { DocsLink } from \"@/components/ui/docs-link\";\nimport {\n\tEmptyState,\n\tEmptyStateActions,\n\tEmptyStateDescription,\n\tEmptyStateIcon,\n\tEmptyStateTitle,\n} from \"@/components/ui/empty-state\";\nimport { Icon } from \"@/components/ui/icons\";\n\ntype TaskRunConcurrencyLimitsEmptyStateProps = {\n\tonAdd: () => void;\n};\nexport const TaskRunConcurrencyLimitsEmptyState = ({\n\tonAdd,\n}: TaskRunConcurrencyLimitsEmptyStateProps) => (\n\t<EmptyState>\n\t\t<EmptyStateIcon id=\"CircleArrowOutUpRight\" />\n\t\t<EmptyStateTitle>\n\t\t\tAdd a concurrency limit for your task runs\n\t\t</EmptyStateTitle>\n\t\t<EmptyStateDescription>\n\t\t\tCreating a limit allows you to limit the number of tasks running\n\t\t\tsimultaneously with a given tag.\n\t\t</EmptyStateDescription>\n\t\t<EmptyStateActions>\n\t\t\t<Button onClick={onAdd}>\n\t\t\t\tAdd Concurrency Limit <Icon id=\"Plus\" className=\"size-4 ml-2\" />\n\t\t\t</Button>\n\t\t\t<DocsLink id=\"task-concurrency-guide\" />\n\t\t</EmptyStateActions>\n\t</EmptyState>\n);\n","import { Button } from \"@/components/ui/button\";\nimport { Icon } from \"@/components/ui/icons\";\nimport { Typography } from \"@/components/ui/typography\";\n\ntype TaskRunConcurrencyLimitsHeaderProps = {\n\tonAdd: () => void;\n};\n\nexport const TaskRunConcurrencyLimitsHeader = ({\n\tonAdd,\n}: TaskRunConcurrencyLimitsHeaderProps) => {\n\treturn (\n\t\t<div className=\"flex gap-2 items-center\">\n\t\t\t<Typography className=\"font-semibold\">\n\t\t\t\tTask Run Concurrency Limits\n\t\t\t</Typography>\n\t\t\t<Button\n\t\t\t\tonClick={onAdd}\n\t\t\t\tsize=\"icon\"\n\t\t\t\tclassName=\"size-7\"\n\t\t\t\tvariant=\"outline\"\n\t\t\t\taria-label=\"add task run concurrency limit\"\n\t\t\t>\n\t\t\t\t<Icon id=\"Plus\" className=\"size-4\" />\n\t\t\t</Button>\n\t\t</div>\n\t);\n};\n","import { zodResolver } from \"@hookform/resolvers/zod\";\nimport { useForm } from \"react-hook-form\";\nimport { toast } from \"sonner\";\nimport { z } from \"zod\";\nimport { useCreateTaskRunConcurrencyLimit } from \"@/api/task-run-concurrency-limits\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n\tDialog,\n\tDialogContent,\n\tDialogFooter,\n\tDialogHeader,\n\tDialogTitle,\n\tDialogTrigger,\n} from \"@/components/ui/dialog\";\nimport {\n\tForm,\n\tFormControl,\n\tFormField,\n\tFormItem,\n\tFormLabel,\n\tFormMessage,\n} from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\n\nconst formSchema = z.object({\n\ttag: z.string().min(1),\n\t/** Coerce to solve common issue of transforming a string number to a number type */\n\tconcurrency_limit: z\n\t\t.number()\n\t\t.default(0)\n\t\t.or(z.string())\n\t\t.pipe(z.coerce.number()),\n});\n\nconst DEFAULT_VALUES = {\n\ttag: \"\",\n\tconcurrency_limit: 0,\n} as const;\n\ntype TaskRunConcurrencyLimitsCreateDialogProps = {\n\tonOpenChange: (open: boolean) => void;\n\tonSubmit: () => void;\n};\n\nexport const TaskRunConcurrencyLimitsCreateDialog = ({\n\tonOpenChange,\n\tonSubmit,\n}: TaskRunConcurrencyLimitsCreateDialogProps) => {\n\tconst { createTaskRunConcurrencyLimit, isPending } =\n\t\tuseCreateTaskRunConcurrencyLimit();\n\n\tconst form = useForm({\n\t\tresolver: zodResolver(formSchema),\n\t\tdefaultValues: DEFAULT_VALUES,\n\t});\n\n\tconst handleAddLimit = (values: z.infer<typeof formSchema>) => {\n\t\tcreateTaskRunConcurrencyLimit(values, {\n\t\t\tonSuccess: () => {\n\t\t\t\ttoast.success(\"Concurrency limit added\");\n\t\t\t},\n\t\t\tonError: (error) => {\n\t\t\t\tconst message = error.message || \"Unknown error while updating limit.\";\n\t\t\t\tform.setError(\"root\", { message });\n\t\t\t},\n\t\t\tonSettled: () => {\n\t\t\t\tform.reset(DEFAULT_VALUES);\n\t\t\t\tonSubmit();\n\t\t\t},\n\t\t});\n\t};\n\n\treturn (\n\t\t<Dialog open onOpenChange={onOpenChange}>\n\t\t\t<DialogContent aria-describedby={undefined}>\n\t\t\t\t<DialogHeader>\n\t\t\t\t\t<DialogTitle>Add Task Run Concurrency Limit</DialogTitle>\n\t\t\t\t</DialogHeader>\n\n\t\t\t\t<Form {...form}>\n\t\t\t\t\t<form\n\t\t\t\t\t\tonSubmit={(e) => void form.handleSubmit(handleAddLimit)(e)}\n\t\t\t\t\t\tclassName=\"space-y-4\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<FormMessage>{form.formState.errors.root?.message}</FormMessage>\n\t\t\t\t\t\t<FormField\n\t\t\t\t\t\t\tcontrol={form.control}\n\t\t\t\t\t\t\tname=\"tag\"\n\t\t\t\t\t\t\trender={({ field }) => (\n\t\t\t\t\t\t\t\t<FormItem>\n\t\t\t\t\t\t\t\t\t<FormLabel>Tag</FormLabel>\n\t\t\t\t\t\t\t\t\t<FormControl>\n\t\t\t\t\t\t\t\t\t\t<Input type=\"text\" autoComplete=\"off\" {...field} />\n\t\t\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t\t\t\t<FormMessage />\n\t\t\t\t\t\t\t\t</FormItem>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<FormField\n\t\t\t\t\t\t\tcontrol={form.control}\n\t\t\t\t\t\t\tname=\"concurrency_limit\"\n\t\t\t\t\t\t\trender={({ field }) => (\n\t\t\t\t\t\t\t\t<FormItem>\n\t\t\t\t\t\t\t\t\t<FormLabel>Concurrency Limit</FormLabel>\n\t\t\t\t\t\t\t\t\t<FormControl>\n\t\t\t\t\t\t\t\t\t\t<Input type=\"number\" {...field} />\n\t\t\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t\t\t\t<FormMessage />\n\t\t\t\t\t\t\t\t</FormItem>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<DialogFooter>\n\t\t\t\t\t\t\t<DialogTrigger asChild>\n\t\t\t\t\t\t\t\t<Button variant=\"outline\">Close</Button>\n\t\t\t\t\t\t\t</DialogTrigger>\n\t\t\t\t\t\t\t<Button type=\"submit\" loading={isPending}>\n\t\t\t\t\t\t\t\tAdd\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</DialogFooter>\n\t\t\t\t\t</form>\n\t\t\t\t</Form>\n\t\t\t</DialogContent>\n\t\t</Dialog>\n\t);\n};\n","import type { TaskRunConcurrencyLimit } from \"@/api/task-run-concurrency-limits\";\nimport { TaskRunConcurrencyLimitsCreateDialog } from \"@/components/concurrency/task-run-concurrency-limits/task-run-concurrency-limits-create-dialog\";\nimport { TaskRunConcurrencyLimitsDeleteDialog } from \"@/components/concurrency/task-run-concurrency-limits/task-run-concurrency-limits-delete-dialog\";\nimport { TaskRunConcurrencyLimitsResetDialog } from \"@/components/concurrency/task-run-concurrency-limits/task-run-concurrency-limits-reset-dialog\";\n\nexport type DialogState =\n\t| { dialog: null | \"create\"; data: undefined }\n\t| {\n\t\t\tdialog: \"reset\" | \"delete\";\n\t\t\tdata: TaskRunConcurrencyLimit;\n\t  };\n\nexport const TaskRunConcurrencyLimitDialog = ({\n\topenDialog,\n\tonCloseDialog,\n\tonOpenChange,\n}: {\n\topenDialog: DialogState;\n\tonOpenChange: (open: boolean) => void;\n\tonCloseDialog: () => void;\n}) => {\n\tconst { dialog, data } = openDialog;\n\tswitch (dialog) {\n\t\tcase \"create\":\n\t\t\treturn (\n\t\t\t\t<TaskRunConcurrencyLimitsCreateDialog\n\t\t\t\t\tonOpenChange={onOpenChange}\n\t\t\t\t\tonSubmit={onCloseDialog}\n\t\t\t\t/>\n\t\t\t);\n\t\tcase \"reset\":\n\t\t\treturn (\n\t\t\t\t<TaskRunConcurrencyLimitsResetDialog\n\t\t\t\t\tdata={data}\n\t\t\t\t\tonOpenChange={onOpenChange}\n\t\t\t\t\tonReset={onCloseDialog}\n\t\t\t\t/>\n\t\t\t);\n\t\tcase \"delete\":\n\t\t\treturn (\n\t\t\t\t<TaskRunConcurrencyLimitsDeleteDialog\n\t\t\t\t\tdata={data}\n\t\t\t\t\tonOpenChange={onOpenChange}\n\t\t\t\t\tonDelete={onCloseDialog}\n\t\t\t\t/>\n\t\t\t);\n\t\tdefault:\n\t\t\treturn null;\n\t}\n};\n","import { useState } from \"react\";\nimport {\n\ttype TaskRunConcurrencyLimit,\n\tuseListTaskRunConcurrencyLimits,\n} from \"@/api/task-run-concurrency-limits\";\n\nimport { TaskRunConcurrencyLimitsDataTable } from \"@/components/concurrency/task-run-concurrency-limits/task-run-concurrency-limits-data-table\";\nimport { TaskRunConcurrencyLimitsEmptyState } from \"@/components/concurrency/task-run-concurrency-limits/task-run-concurrency-limits-empty-state\";\nimport { TaskRunConcurrencyLimitsHeader } from \"@/components/concurrency/task-run-concurrency-limits/task-run-concurrency-limits-header\";\nimport {\n\ttype DialogState,\n\tTaskRunConcurrencyLimitDialog,\n} from \"./task-run-concurrency-limit-dialog\";\n\nexport const TaskRunConcurrencyLimitsView = () => {\n\tconst [openDialog, setOpenDialog] = useState<DialogState>({\n\t\tdialog: null,\n\t\tdata: undefined,\n\t});\n\n\tconst { data } = useListTaskRunConcurrencyLimits();\n\n\tconst handleAddRow = () =>\n\t\tsetOpenDialog({ dialog: \"create\", data: undefined });\n\n\tconst handleDeleteRow = (data: TaskRunConcurrencyLimit) =>\n\t\tsetOpenDialog({ dialog: \"delete\", data });\n\n\tconst handleResetRow = (data: TaskRunConcurrencyLimit) =>\n\t\tsetOpenDialog({ dialog: \"reset\", data });\n\n\tconst handleCloseDialog = () =>\n\t\tsetOpenDialog({ dialog: null, data: undefined });\n\n\t// Because all modals will be rendered, only control the closing logic\n\tconst handleOpenChange = (open: boolean) => {\n\t\tif (!open) {\n\t\t\thandleCloseDialog();\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className=\"flex flex-col gap-4\">\n\t\t\t<TaskRunConcurrencyLimitsHeader onAdd={handleAddRow} />\n\t\t\t{data.length === 0 ? (\n\t\t\t\t<TaskRunConcurrencyLimitsEmptyState onAdd={handleAddRow} />\n\t\t\t) : (\n\t\t\t\t<TaskRunConcurrencyLimitsDataTable\n\t\t\t\t\tdata={data}\n\t\t\t\t\tonDeleteRow={handleDeleteRow}\n\t\t\t\t\tonResetRow={handleResetRow}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t<TaskRunConcurrencyLimitDialog\n\t\t\t\topenDialog={openDialog}\n\t\t\t\tonCloseDialog={handleCloseDialog}\n\t\t\t\tonOpenChange={handleOpenChange}\n\t\t\t/>\n\t\t</div>\n\t);\n};\n","import { getRouteApi } from \"@tanstack/react-router\";\nimport type { JSX } from \"react\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport type { TabOptions } from \"@/routes/concurrency-limits\";\n\nconst routeApi = getRouteApi(\"/concurrency-limits/\");\n\ntype TabOptionValues = {\n\t/** Value of search value in url */\n\ttabSearchValue: TabOptions;\n\t/** Display value for the UI */\n\tdisplayValue: string;\n};\n\n/** Maps url tab option to visual name */\nconst TAB_OPTIONS: Record<TabOptions, TabOptionValues> = {\n\tglobal: {\n\t\ttabSearchValue: \"global\",\n\t\tdisplayValue: \"Global\",\n\t},\n\t\"task-run\": {\n\t\ttabSearchValue: \"task-run\",\n\t\tdisplayValue: \"Task Run\",\n\t},\n} as const;\n\ntype ConcurrencyLimitsTabsProps = {\n\tglobalView: React.ReactNode;\n\ttaskRunView: React.ReactNode;\n};\n\n// TODO: Move Tabs for navigation to a generic styled component\n\nexport const ConcurrencyLimitsTabs = ({\n\tglobalView,\n\ttaskRunView,\n}: ConcurrencyLimitsTabsProps): JSX.Element => {\n\tconst { tab } = routeApi.useSearch();\n\tconst navigate = routeApi.useNavigate();\n\n\treturn (\n\t\t<Tabs defaultValue=\"Global\" value={tab}>\n\t\t\t<TabsList>\n\t\t\t\t<TabsTrigger\n\t\t\t\t\tvalue={TAB_OPTIONS.global.tabSearchValue}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tvoid navigate({\n\t\t\t\t\t\t\tto: \"/concurrency-limits\",\n\t\t\t\t\t\t\tsearch: {\n\t\t\t\t\t\t\t\ttab: TAB_OPTIONS.global.tabSearchValue,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t});\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{TAB_OPTIONS.global.displayValue}\n\t\t\t\t</TabsTrigger>\n\t\t\t\t<TabsTrigger\n\t\t\t\t\tvalue={TAB_OPTIONS[\"task-run\"].tabSearchValue}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tvoid navigate({\n\t\t\t\t\t\t\tto: \"/concurrency-limits\",\n\t\t\t\t\t\t\tsearch: {\n\t\t\t\t\t\t\t\ttab: TAB_OPTIONS[\"task-run\"].tabSearchValue,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t});\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{TAB_OPTIONS[\"task-run\"].displayValue}\n\t\t\t\t</TabsTrigger>\n\t\t\t</TabsList>\n\t\t\t<TabsContent value={TAB_OPTIONS.global.tabSearchValue}>\n\t\t\t\t{globalView}\n\t\t\t</TabsContent>\n\t\t\t<TabsContent value={TAB_OPTIONS[\"task-run\"].tabSearchValue}>\n\t\t\t\t{taskRunView}\n\t\t\t</TabsContent>\n\t\t</Tabs>\n\t);\n};\n","import { GlobalConcurrencyLimitsView } from \"@/components/concurrency/global-concurrency-limits/global-concurrency-limits-view\";\nimport { TaskRunConcurrencyLimitsView } from \"@/components/concurrency/task-run-concurrency-limits/task-run-concurrency-limits-view\";\nimport {\n\tBreadcrumb,\n\tBreadcrumbItem,\n\tBreadcrumbList,\n} from \"@/components/ui/breadcrumb\";\n\nimport { ConcurrencyLimitsTabs } from \"./concurrency-limits-tabs\";\n\nexport const ConcurrencyLimitsPage = () => {\n\treturn (\n\t\t<div className=\"flex flex-col gap-4\">\n\t\t\t<ConcurrencyLimitTitle />\n\t\t\t<ConcurrencyLimitsTabs\n\t\t\t\tglobalView={<GlobalConcurrencyLimitsView />}\n\t\t\t\ttaskRunView={<TaskRunConcurrencyLimitsView />}\n\t\t\t/>\n\t\t</div>\n\t);\n};\n\nconst ConcurrencyLimitTitle = () => (\n\t<Breadcrumb>\n\t\t<BreadcrumbList>\n\t\t\t<BreadcrumbItem className=\"text-xl font-semibold\">\n\t\t\t\tConcurrency\n\t\t\t</BreadcrumbItem>\n\t\t</BreadcrumbList>\n\t</Breadcrumb>\n);\n","import { createFileRoute } from \"@tanstack/react-router\";\nimport { zodValidator } from \"@tanstack/zod-adapter\";\nimport { z } from \"zod\";\nimport { buildListGlobalConcurrencyLimitsQuery } from \"@/api/global-concurrency-limits\";\nimport { buildListTaskRunConcurrencyLimitsQuery } from \"@/api/task-run-concurrency-limits\";\nimport { ConcurrencyLimitsPage } from \"@/components/concurrency/concurrency-limits-page\";\n\n/**\n * Schema for validating URL search parameters for the Concurrency Limits page.\n * @property {string} search used to filter data table\n * @property {'global' | 'task-run'} tab used designate which tab view to display\n */\nconst searchParams = z.object({\n\tsearch: z.string().optional(),\n\ttab: z.enum([\"global\", \"task-run\"]).default(\"global\"),\n});\n\nexport type TabOptions = z.infer<typeof searchParams>[\"tab\"];\n\nexport const Route = createFileRoute(\"/concurrency-limits/\")({\n\tvalidateSearch: zodValidator(searchParams),\n\tcomponent: ConcurrencyLimitsPage,\n\twrapInSuspense: true,\n\tloader: ({ context }) =>\n\t\tPromise.all([\n\t\t\tcontext.queryClient.ensureQueryData(\n\t\t\t\tbuildListGlobalConcurrencyLimitsQuery(),\n\t\t\t),\n\t\t\tcontext.queryClient.ensureQueryData(\n\t\t\t\tbuildListTaskRunConcurrencyLimitsQuery(),\n\t\t\t),\n\t\t]),\n});\n"],"names":["ActionsCell","onEditRow","onDeleteRow","props","handleCopyId","id","toast","row","DropdownMenu","jsx","DropdownMenuTrigger","jsxs","Button","Icon","DropdownMenuContent","DropdownMenuLabel","DropdownMenuItem","ActiveCell","updateGlobalConcurrencyLimit","useUpdateGlobalConcurrencyLimit","handleCheckedChange","checked","error","message","rowActive","rowId","Switch","routeApi","getRouteApi","columnHelper","createColumnHelper","createColumns","GlobalConcurrencyLimitsDataTable","data","navigate","search","deferredSearch","useDeferredValue","filteredData","useMemo","Table","value","prev","onSearchChange","searchValue","table","useReactTable","getCoreRowModel","getPaginationRowModel","SearchInput","e","DataTable","GlobalConcurrencyLimitsEmptyState","onAdd","EmptyState","EmptyStateIcon","EmptyStateTitle","EmptyStateDescription","EmptyStateActions","DocsLink","GlobalConcurrencyLimitsHeader","Typography","formSchema","z.object","z.boolean","z.number","z.string","z.coerce","DEFAULT_VALUES","useCreateOrEditGlobalConcurrencyLimitForm","limitToUpdate","onSubmit","createGlobalConcurrencyLimit","createStatus","useCreateGlobalConcurrencyLimit","updateStatus","form","useForm","zodResolver","useEffect","active","name","limit","slot_decay_per_second","active_slots","values","onSettled","GlobalConcurrencyLimitsCreateOrEditDialog","onOpenChange","isLoading","saveOrUpdate","dialogTitle","Dialog","DialogContent","DialogHeader","DialogTitle","Form","FormMessage","FormField","field","FormItem","FormLabel","FormControl","Input","DialogFooter","DialogTrigger","GlobalConcurrencyLimitsDeleteDialog","onDelete","deleteGlobalConcurrencyLimit","isPending","useDeleteGlobalConcurrencyLimit","handleOnClick","DialogDescription","GlobalConcurrencyLimitsDialog","openDialog","onCloseDialog","dialog","GlobalConcurrencyLimitsView","setOpenDialog","useState","useListGlobalConcurrencyLimits","handleAddRow","handleEditRow","handleDeleteRow","handleCloseDialog","handleOpenChange","open","ActiveTaskRunCells","numActiveTaskRuns","TagCell","tag","Link","onResetRow","TaskRunConcurrencyLimitsActionsMenu","TaskRunConcurrencyLimitsDataTable","TaskRunConcurrencyLimitsEmptyState","TaskRunConcurrencyLimitsHeader","TaskRunConcurrencyLimitsCreateDialog","createTaskRunConcurrencyLimit","useCreateTaskRunConcurrencyLimit","handleAddLimit","TaskRunConcurrencyLimitDialog","TaskRunConcurrencyLimitsResetDialog","TaskRunConcurrencyLimitsDeleteDialog","TaskRunConcurrencyLimitsView","useListTaskRunConcurrencyLimits","handleResetRow","TAB_OPTIONS","ConcurrencyLimitsTabs","globalView","taskRunView","tab","Tabs","TabsList","TabsTrigger","TabsContent","ConcurrencyLimitsPage","ConcurrencyLimitTitle","Breadcrumb","BreadcrumbList","BreadcrumbItem","z","string","optional","default","SplitComponent"],"mappings":"w2BAkBO,MAAMA,GAAc,CAAC,CAC3B,UAAAC,EACA,YAAAC,EACA,GAAGC,CACJ,IAAwB,CACvB,MAAMC,EAAgBC,GAAe,CAC/B,UAAU,UAAU,UAAUA,CAAE,EACrCC,EAAM,QAAQ,WAAW,CAC1B,EAEMC,EAAMJ,EAAM,IAAI,SAEtB,cACEK,GAAA,CACA,SAAA,CAAAC,EAAAA,IAACC,GAAA,CAAoB,QAAO,GAC3B,SAAAC,EAAAA,KAACC,GAAO,QAAQ,UAAU,UAAU,aACnC,SAAA,CAAAH,EAAAA,IAAC,OAAA,CAAK,UAAU,UAAU,SAAA,YAAS,EACnCA,EAAAA,IAACI,EAAA,CAAK,GAAG,eAAe,UAAU,QAAA,CAAS,CAAA,CAAA,CAC5C,CAAA,CACD,EACAF,EAAAA,KAACG,GAAA,CAAoB,MAAM,MAC1B,SAAA,CAAAL,EAAAA,IAACM,IAAkB,SAAA,SAAA,CAAO,EAC1BN,MAACO,GAAiB,QAAS,IAAMZ,EAAaG,EAAI,EAAE,EAAG,SAAA,UAEvD,QACCS,EAAA,CAAiB,QAAS,IAAMd,EAAYK,CAAG,EAAG,SAAA,SAEnD,QACCS,EAAA,CAAiB,QAAS,IAAMf,EAAUM,CAAG,EAAG,SAAA,MAAA,CAAI,CAAA,CAAA,CACtD,CAAA,EACD,CAEF,EC1CaU,GACZd,GACI,CACJ,KAAM,CAAE,6BAAAe,CAAA,EAAiCC,EAAA,EAEnCC,EAAsB,CAACC,EAAkBhB,IAAe,CAC7Da,EACC,CACC,WAAYb,EACZ,OAAQgB,CAAA,EAET,CACC,UAAW,IAAM,CAChBf,EAAM,QAAQ,2BAA2B,CAC1C,EACA,QAAUgB,GAAU,CACnB,MAAMC,EACLD,EAAM,SAAW,6CAClB,QAAQ,MAAMC,CAAO,CACtB,CAAA,CACD,CAEF,EAEMC,EAAYrB,EAAM,SAAA,EAClBsB,EAAQtB,EAAM,IAAI,SAAS,GAEjC,OACCM,EAAAA,IAACiB,EAAA,CACA,aAAW,gBACX,QAASF,EACT,gBAAkBH,GAAYD,EAAoBC,EAASI,CAAK,CAAA,CAAA,CAGnE,EC5BME,EAAWC,EAAY,sBAAsB,EAE7CC,EAAeC,EAAA,EAEfC,GAAgB,CAAC,CACtB,UAAA9B,EACA,YAAAC,CACD,IAGM,CACL2B,EAAa,SAAS,OAAQ,CAC7B,OAAQ,MAAA,CACR,EACDA,EAAa,SAAS,QAAS,CAC9B,OAAQ,OAAA,CACR,EACDA,EAAa,SAAS,eAAgB,CACrC,OAAQ,cAAA,CACR,EACDA,EAAa,SAAS,wBAAyB,CAC9C,OAAQ,wBAAA,CACR,EACDA,EAAa,SAAS,SAAU,CAC/B,OAAQ,SACR,KAAMZ,EAAA,CACN,EACDY,EAAa,QAAQ,CACpB,GAAI,UACJ,KAAO1B,GACNM,MAAC,MAAA,CAAI,UAAU,4BACd,SAAAA,EAAAA,IAACT,GAAA,CACC,GAAGG,EACJ,UAAAF,EACA,YAAAC,CAAA,CAAA,CACD,CACD,CAAA,CAED,CACF,EAQa8B,GAAmC,CAAC,CAChD,KAAAC,EACA,UAAAhC,EACA,YAAAC,CACD,IAA6C,CAC5C,MAAMgC,EAAWP,EAAS,YAAA,EACpB,CAAE,OAAAQ,CAAA,EAAWR,EAAS,UAAA,EACtBS,EAAiBC,EAAAA,iBAAiBF,GAAU,EAAE,EAE9CG,EAAeC,EAAAA,QAAQ,IACrBN,EAAK,OAAQ1B,GACnBA,EAAI,KAAK,cAAc,SAAS6B,EAAe,YAAA,CAAa,CAAA,EAE3D,CAACH,EAAMG,CAAc,CAAC,EAEzB,OACC3B,EAAAA,IAAC+B,GAAA,CACA,KAAMF,EACN,YAAApC,EACA,UAAAD,EACA,YAAakC,EACb,eAAiBM,GAAA,CACXP,EAAS,CACb,GAAI,IACJ,OAASQ,IAAU,CAAE,GAAGA,EAAM,OAAQD,CAAA,EAAM,CAC5C,EAAA,CAAA,CAIL,EAUO,SAASD,GAAM,CACrB,KAAAP,EACA,YAAA/B,EACA,UAAAD,EACA,eAAA0C,EACA,YAAAC,CACD,EAAe,CACd,MAAMC,EAAQC,EAAc,CAC3B,KAAAb,EACA,QAASF,GAAc,CAAE,YAAA7B,EAAa,UAAAD,EAAW,EACjD,gBAAiB8C,EAAA,EACjB,sBAAuBC,EAAA,CAAsB,CAC7C,EAED,OACCrC,EAAAA,KAAC,MAAA,CAAI,UAAU,sBACd,SAAA,CAAAF,EAAAA,IAACwC,EAAA,CACA,UAAU,WACV,YAAY,kCACZ,MAAOL,EACP,SAAWM,GAAMP,EAAeO,EAAE,OAAO,KAAK,CAAA,CAAA,EAE/CzC,MAAC0C,GAAU,MAAAN,CAAA,CAAc,CAAA,EAC1B,CAEF,CC/GO,MAAMO,GAAoC,CAAC,CACjD,MAAAC,CACD,WACEC,GAAA,CACA,SAAA,CAAA7C,EAAAA,IAAC8C,GAAA,CAAe,GAAG,2BAAA,CAA4B,EAC/C9C,EAAAA,IAAC+C,IAAgB,SAAA,yBAAA,CAAuB,EACxC/C,EAAAA,IAACgD,IAAsB,SAAA,2HAAA,CAGvB,SACCC,GAAA,CACA,SAAA,CAAA/C,EAAAA,KAACC,EAAA,CAAO,QAASyC,EAAO,SAAA,CAAA,yBACD5C,EAAAA,IAACI,EAAA,CAAK,GAAG,OAAO,UAAU,aAAA,CAAc,CAAA,EAC/D,EACAJ,EAAAA,IAACkD,GAAA,CAAS,GAAG,0BAAA,CAA2B,CAAA,CAAA,CACzC,CAAA,EACD,ECtBYC,GAAgC,CAAC,CAC7C,MAAAP,CACD,IAEE1C,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACd,SAAA,CAAAF,EAAAA,IAACoD,GAAA,CAAW,UAAU,gBAAgB,SAAA,4BAEtC,EACApD,EAAAA,IAACG,EAAA,CACA,QAASyC,EACT,KAAK,OACL,UAAU,SACV,QAAQ,UACR,aAAW,+BAEX,SAAA5C,EAAAA,IAACI,EAAA,CAAK,GAAG,OAAO,UAAU,QAAA,CAAS,CAAA,CAAA,CACpC,EACD,ECdIiD,GAAaC,EAAS,CAC3B,OAAQC,GAAE,EAAU,QAAQ,EAAI,EAEhC,aAAcC,EAAE,EAAS,QAAQ,CAAC,EAAE,GAAGC,EAAE,CAAQ,EAAE,KAAKC,EAAS,QAAQ,EAEzE,MAAOF,EAAE,EAAS,QAAQ,CAAC,EAAE,GAAGC,EAAE,CAAQ,EAAE,KAAKC,EAAS,QAAQ,EAClE,KAAMD,IAEJ,IAAI,EAAG,CAAE,QAAS,oCAAA,CAAsC,EACxD,QAAQ,EAAE,EAEZ,sBAAuBD,EACrB,EACA,QAAQ,CAAC,EACT,GAAGC,EAAE,CAAQ,EACb,KAAKC,EAAS,QAAQ,EAExB,aAAcF,EAAE,EAAS,QAAQ,CAAC,EAAE,GAAGC,GAAU,EAAE,KAAKC,EAAS,QAAQ,CAC1E,CAAC,EAEKC,EAAiB,CACtB,OAAQ,GACR,KAAM,GACN,MAAO,EACP,sBAAuB,EACvB,aAAc,EACd,aAAc,CACf,EASaC,GAA4C,CAAC,CACzD,cAAAC,EACA,SAAAC,CACD,IAAwD,CACvD,KAAM,CAAE,6BAAAC,EAA8B,OAAQC,CAAA,EAC7CC,GAAA,EACK,CAAE,6BAAAxD,EAA8B,OAAQyD,CAAA,EAC7CxD,EAAA,EAEKyD,EAAOC,GAAQ,CACpB,SAAUC,GAAYhB,EAAU,EAChC,cAAeM,CAAA,CACf,EAGDW,OAAAA,EAAAA,UAAU,IAAM,CACf,GAAIT,EAAe,CAClB,KAAM,CAAE,OAAAU,EAAQ,KAAAC,EAAM,MAAAC,EAAO,sBAAAC,EAAuB,aAAAC,IACnDd,EACDM,EAAK,MAAM,CAAE,OAAAI,EAAQ,KAAAC,EAAM,MAAAC,EAAO,sBAAAC,EAAuB,aAAAC,GAAc,CACxE,MACCR,EAAK,MAAMR,CAAc,CAE3B,EAAG,CAACQ,EAAMN,CAAa,CAAC,EA2CjB,CACN,KAAAM,EACA,aA3CqBS,GAAuC,CAC5D,MAAMC,EAAY,IAAM,CACvBV,EAAK,MAAMR,CAAc,EACzBG,EAAA,CACD,EAEID,GAAe,GAClBpD,EACC,CACC,WAAYoD,EAAc,GAC1B,GAAGe,CAAA,EAEJ,CACC,UAAW,IAAM,CAChB/E,EAAM,QAAQ,eAAe,CAC9B,EACA,QAAUgB,GAAU,CACnB,MAAMC,EACLD,EAAM,SAAW,sCAClBsD,EAAK,SAAS,OAAQ,CAAE,QAAArD,CAAA,CAAS,CAClC,EACA,UAAA+D,CAAA,CACD,EAGDd,EAA6Ba,EAAQ,CACpC,UAAW,IAAM,CAChB/E,EAAM,QAAQ,eAAe,CAC9B,EACA,QAAUgB,GAAU,CACnB,MAAMC,EACLD,EAAM,SAAW,yCAClBsD,EAAK,SAAS,OAAQ,CACrB,QAAArD,CAAA,CACA,CACF,EACA,UAAA+D,CAAA,CACA,CAEH,EAKC,UAAWb,IAAiB,WAAaE,IAAiB,SAAA,CAE5D,ECzFaY,EAA4C,CAAC,CACzD,cAAAjB,EACA,aAAAkB,EACA,SAAAjB,CACD,IAAsD,CACrD,KAAM,CAAE,KAAAK,EAAM,UAAAa,EAAW,aAAAC,CAAA,EACxBrB,GAA0C,CACzC,cAAAC,EACA,SAAAC,CAAA,CACA,EAEIoB,EAAcrB,EACjB,UAAUA,EAAc,IAAI,GAC5B,wBAEH,OACC7D,EAAAA,IAACmF,GAAO,KAAI,GAAC,aAAAJ,EACZ,SAAA7E,EAAAA,KAACkF,EAAA,CAAc,mBAAkB,OAChC,SAAA,CAAApF,MAACqF,EAAA,CACA,SAAArF,EAAAA,IAACsF,EAAA,CAAa,SAAAJ,CAAA,CAAY,EAC3B,EAEAlF,EAAAA,IAACuF,GAAA,CAAM,GAAGpB,EACT,SAAAjE,EAAAA,KAAC,OAAA,CACA,SAAWuC,IAAW0B,EAAK,aAAac,CAAY,EAAExC,CAAC,GACvD,UAAU,YAEV,SAAA,CAAAzC,MAACwF,EAAA,CAAa,SAAArB,EAAK,UAAU,OAAO,MAAM,QAAQ,EAClDnE,EAAAA,IAACyF,EAAA,CACA,QAAStB,EAAK,QACd,KAAK,OACL,OAAQ,CAAC,CAAE,MAAAuB,CAAA,WACTC,EAAA,CACA,SAAA,CAAA3F,EAAAA,IAAC4F,GAAU,SAAA,MAAA,CAAI,EACf5F,EAAAA,IAAC6F,EAAA,CACA,SAAA7F,EAAAA,IAAC8F,EAAA,CAAM,KAAK,OAAO,aAAa,MAAO,GAAGJ,CAAA,CAAO,CAAA,CAClD,QACCF,EAAA,CAAA,CAAY,CAAA,CAAA,CACd,CAAA,CAAA,EAGFxF,EAAAA,IAACyF,EAAA,CACA,QAAStB,EAAK,QACd,KAAK,QACL,OAAQ,CAAC,CAAE,MAAAuB,CAAA,WACTC,EAAA,CACA,SAAA,CAAA3F,EAAAA,IAAC4F,GAAU,SAAA,mBAAA,CAAiB,EAC5B5F,EAAAA,IAAC6F,GACA,SAAA7F,MAAC8F,EAAA,CAAM,KAAK,SAAU,GAAGJ,EAAO,CAAA,CACjC,QACCF,EAAA,CAAA,CAAY,CAAA,CAAA,CACd,CAAA,CAAA,EAGFxF,EAAAA,IAACyF,EAAA,CACA,QAAStB,EAAK,QACd,KAAK,wBACL,OAAQ,CAAC,CAAE,MAAAuB,CAAA,WACTC,EAAA,CACA,SAAA,CAAA3F,EAAAA,IAAC4F,GAAU,SAAA,uBAAA,CAAqB,EAChC5F,EAAAA,IAAC6F,GACA,SAAA7F,MAAC8F,EAAA,CAAM,KAAK,SAAU,GAAGJ,EAAO,CAAA,CACjC,QACCF,EAAA,CAAA,CAAY,CAAA,CAAA,CACd,CAAA,CAAA,EAGD3B,GACA7D,EAAAA,IAACyF,EAAA,CACA,QAAStB,EAAK,QACd,KAAK,eACL,OAAQ,CAAC,CAAE,MAAAuB,CAAA,WACTC,EAAA,CACA,SAAA,CAAA3F,EAAAA,IAAC4F,GAAU,SAAA,cAAA,CAAY,EACvB5F,EAAAA,IAAC6F,GACA,SAAA7F,MAAC8F,EAAA,CAAM,KAAK,SAAU,GAAGJ,EAAO,CAAA,CACjC,QACCF,EAAA,CAAA,CAAY,CAAA,CAAA,CACd,CAAA,CAAA,EAIHxF,EAAAA,IAACyF,EAAA,CACA,QAAStB,EAAK,QACd,KAAK,SACL,OAAQ,CAAC,CAAE,MAAAuB,CAAA,WACTC,EAAA,CACA,SAAA,CAAA3F,EAAAA,IAAC4F,GAAU,SAAA,QAAA,CAAM,QAChBC,EAAA,CACA,SAAA7F,EAAAA,IAACiB,EAAA,CACA,UAAU,QACV,QAASyE,EAAM,MACf,gBAAiBA,EAAM,QAAA,CAAA,EAEzB,QACCF,EAAA,CAAA,CAAY,CAAA,CAAA,CACd,CAAA,CAAA,SAGDO,EAAA,CACA,SAAA,CAAA/F,EAAAA,IAACgG,EAAA,CAAc,QAAO,GACrB,SAAAhG,EAAAA,IAACG,GAAO,QAAQ,UAAU,iBAAK,CAAA,CAChC,EACAH,EAAAA,IAACG,GAAO,KAAK,SAAS,QAAS6E,EAC7B,SAAAnB,EAAgB,SAAW,MAAA,CAC7B,CAAA,CAAA,CACD,CAAA,CAAA,CAAA,CACD,CACD,CAAA,CAAA,CACD,CAAA,CACD,CAEF,ECvHaoC,GAAsC,CAAC,CACnD,MAAAxB,EACA,aAAAM,EACA,SAAAmB,CACD,IAAgD,CAC/C,KAAM,CAAE,6BAAAC,EAA8B,UAAAC,CAAA,EACrCC,GAAA,EAEKC,EAAiB1G,GAAe,CACrCuG,EAA6BvG,EAAI,CAChC,UAAW,IAAM,CAChBC,EAAM,QAAQ,2BAA2B,CAC1C,EACA,QAAUgB,GAAU,CACnB,MAAMC,EACLD,EAAM,SAAW,kDAClB,QAAQ,MAAMC,CAAO,CACtB,EACA,UAAWoF,CAAA,CACX,CACF,EAEA,aACEf,EAAA,CAAO,KAAI,GAAC,aAAAJ,EACZ,gBAACK,EAAA,CACA,SAAA,CAAApF,MAACqF,EAAA,CACA,SAAArF,EAAAA,IAACsF,EAAA,CAAY,SAAA,0BAAA,CAAwB,EACtC,SACCiB,GAAA,CAAkB,SAAA,CAAA,mCACe9B,EAAM,IAAA,EACxC,SACCsB,EAAA,CACA,SAAA,CAAA/F,EAAAA,IAACgG,EAAA,CAAc,QAAO,GACrB,SAAAhG,EAAAA,IAACG,GAAO,QAAQ,UAAU,iBAAK,CAAA,CAChC,EACAH,EAAAA,IAACG,EAAA,CACA,QAAQ,cACR,QAAS,IAAMmG,EAAc7B,EAAM,EAAE,EACrC,QAAS2B,EACT,SAAA,QAAA,CAAA,CAED,CAAA,CACD,CAAA,CAAA,CACD,CAAA,CACD,CAEF,ECxDaI,GAAgC,CAAC,CAC7C,WAAAC,EACA,cAAAC,EACA,aAAA3B,CACD,IAIM,CACL,KAAM,CAAE,OAAA4B,EAAQ,KAAAnF,CAAA,EAASiF,EACzB,OAAQE,EAAA,CACP,IAAK,SACJ,OACC3G,EAAAA,IAAC8E,EAAA,CACA,aAAAC,EACA,SAAU2B,CAAA,CAAA,EAGb,IAAK,SACJ,OACC1G,EAAAA,IAACiG,GAAA,CACA,MAAOzE,EACP,aAAAuD,EACA,SAAU2B,CAAA,CAAA,EAGb,IAAK,OACJ,OACC1G,EAAAA,IAAC8E,EAAA,CACA,aAAAC,EACA,cAAevD,EACf,SAAUkF,CAAA,CAAA,EAGb,QACC,OAAO,IAAA,CAEV,EClCaE,GAA8B,IAAM,CAChD,KAAM,CAACH,EAAYI,CAAa,EAAIC,WAAsB,CACzD,OAAQ,KACR,KAAM,MAAA,CACN,EAEK,CAAE,KAAAtF,CAAA,EAASuF,GAAA,EAEXC,EAAe,IACpBH,EAAc,CAAE,OAAQ,SAAU,KAAM,OAAW,EAE9CI,EAAiBzF,GACtBqF,EAAc,CAAE,OAAQ,OAAQ,KAAArF,EAAM,EAEjC0F,EAAmB1F,GACxBqF,EAAc,CAAE,OAAQ,SAAU,KAAArF,EAAM,EAEnC2F,EAAoB,IACzBN,EAAc,CAAE,OAAQ,KAAM,KAAM,OAAW,EAG1CO,EAAoBC,GAAkB,CACtCA,GACJF,EAAA,CAEF,EAEA,OACCjH,EAAAA,KAAC,MAAA,CAAI,UAAU,sBACd,SAAA,CAAAF,EAAAA,IAACmD,GAAA,CAA8B,MAAO6D,CAAA,CAAc,EACnDxF,EAAK,SAAW,QACfmB,GAAA,CAAkC,MAAOqE,EAAc,EAExDhH,EAAAA,IAACuB,GAAA,CACA,KAAAC,EACA,UAAWyF,EACX,YAAaC,CAAA,CAAA,EAGflH,EAAAA,IAACwG,GAAA,CACA,WAAAC,EACA,cAAeU,EACf,aAAcC,CAAA,CAAA,CACf,EACD,CAEF,ECrDaE,GAAsB5H,GAAmC,CAErE,MAAM6H,EADiB7H,EAAM,SAAA,EACY,OACzC,OAAI6H,IAAsB,EAClB,OAEDA,CACR,ECTaC,GAAW9H,GAAwB,CAC/C,MAAM+H,EAAM/H,EAAM,SAAA,EACZE,EAAKF,EAAM,IAAI,SAAS,GAC9B,OACCM,MAAC0H,IAAK,OAAQ,CAAE,GAAA9H,GAAM,GAAI,4CACxB,SAAA6H,EACF,CAEF,ECEMvG,EAAWC,EAAY,sBAAsB,EAC7CC,EAAeC,EAAA,EAEfC,GAAgB,CAAC,CACtB,YAAA7B,EACA,WAAAkI,CACD,IAGM,CACLvG,EAAa,SAAS,MAAO,CAC5B,OAAQ,MACR,KAAMoG,EAAA,CACN,EACDpG,EAAa,SAAS,oBAAqB,CAC1C,OAAQ,OAAA,CACR,EACDA,EAAa,SAAS,eAAgB,CACrC,OAAQ,mBACR,KAAMkG,EAAA,CACN,EACDlG,EAAa,QAAQ,CACpB,GAAI,UACJ,KAAO1B,GAAU,CAChB,MAAMI,EAAMJ,EAAM,IAAI,SACtB,OACCM,EAAAA,IAAC,MAAA,CAAI,UAAU,4BACd,SAAAA,EAAAA,IAAC4H,GAAA,CACA,GAAI9H,EAAI,GACR,SAAU,IAAML,EAAYK,CAAG,EAC/B,QAAS,IAAM6H,EAAW7H,CAAG,CAAA,CAAA,EAE/B,CAEF,CAAA,CACA,CACF,EAQa+H,GAAoC,CAAC,CACjD,KAAArG,EACA,YAAA/B,EACA,WAAAkI,CACD,IAA8C,CAC7C,MAAMlG,EAAWP,EAAS,YAAA,EACpB,CAAE,OAAAQ,CAAA,EAAWR,EAAS,UAAA,EACtBS,EAAiBC,EAAAA,iBAAiBF,GAAU,EAAE,EAE9CG,EAAeC,EAAAA,QAAQ,IACrBN,EAAK,OAAQ1B,GACnBA,EAAI,IAAI,cAAc,SAAS6B,EAAe,YAAA,CAAa,CAAA,EAE1D,CAACH,EAAMG,CAAc,CAAC,EAEzB,OACC3B,EAAAA,IAAC+B,GAAA,CACA,KAAMF,EACN,YAAApC,EACA,WAAAkI,EACA,YAAajG,EACb,eAAiBM,GAAA,CACXP,EAAS,CACb,GAAI,IACJ,OAASQ,IAAU,CAAE,GAAGA,EAAM,OAAQD,CAAA,EAAM,CAC5C,EAAA,CAAA,CAIL,EAUO,SAASD,GAAM,CACrB,KAAAP,EACA,YAAA/B,EACA,WAAAkI,EACA,eAAAzF,EACA,YAAAC,CACD,EAAe,CACd,MAAMC,EAAQC,EAAc,CAC3B,KAAAb,EACA,QAASF,GAAc,CAAE,YAAA7B,EAAa,WAAAkI,EAAY,EAClD,gBAAiBrF,EAAA,EACjB,sBAAuBC,EAAA,CAAsB,CAC7C,EAED,OACCrC,EAAAA,KAAC,MAAA,CAAI,UAAU,sBACd,SAAA,CAAAF,EAAAA,IAACwC,EAAA,CACA,UAAU,WACV,YAAY,2BACZ,MAAOL,EACP,SAAWM,GAAMP,EAAeO,EAAE,OAAO,KAAK,CAAA,CAAA,EAE/CzC,MAAC0C,GAAU,MAAAN,CAAA,CAAc,CAAA,EAC1B,CAEF,CC9GO,MAAM0F,GAAqC,CAAC,CAClD,MAAAlF,CACD,WACEC,GAAA,CACA,SAAA,CAAA7C,EAAAA,IAAC8C,GAAA,CAAe,GAAG,uBAAA,CAAwB,EAC3C9C,EAAAA,IAAC+C,IAAgB,SAAA,4CAAA,CAEjB,EACA/C,EAAAA,IAACgD,IAAsB,SAAA,mGAAA,CAGvB,SACCC,GAAA,CACA,SAAA,CAAA/C,EAAAA,KAACC,EAAA,CAAO,QAASyC,EAAO,SAAA,CAAA,yBACD5C,EAAAA,IAACI,EAAA,CAAK,GAAG,OAAO,UAAU,aAAA,CAAc,CAAA,EAC/D,EACAJ,EAAAA,IAACkD,GAAA,CAAS,GAAG,wBAAA,CAAyB,CAAA,CAAA,CACvC,CAAA,EACD,ECxBY6E,GAAiC,CAAC,CAC9C,MAAAnF,CACD,IAEE1C,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACd,SAAA,CAAAF,EAAAA,IAACoD,GAAA,CAAW,UAAU,gBAAgB,SAAA,8BAEtC,EACApD,EAAAA,IAACG,EAAA,CACA,QAASyC,EACT,KAAK,OACL,UAAU,SACV,QAAQ,UACR,aAAW,iCAEX,SAAA5C,EAAAA,IAACI,EAAA,CAAK,GAAG,OAAO,UAAU,QAAA,CAAS,CAAA,CAAA,CACpC,EACD,ECDIiD,GAAaC,EAAS,CAC3B,IAAKG,EAAE,EAAS,IAAI,CAAC,EAErB,kBAAmBD,EACjB,EACA,QAAQ,CAAC,EACT,GAAGC,GAAU,EACb,KAAKC,EAAS,QAAQ,CACzB,CAAC,EAEKC,EAAiB,CACtB,IAAK,GACL,kBAAmB,CACpB,EAOaqE,GAAuC,CAAC,CACpD,aAAAjD,EACA,SAAAjB,CACD,IAAiD,CAChD,KAAM,CAAE,8BAAAmE,EAA+B,UAAA7B,CAAA,EACtC8B,GAAA,EAEK/D,EAAOC,GAAQ,CACpB,SAAUC,GAAYhB,EAAU,EAChC,cAAeM,CAAA,CACf,EAEKwE,EAAkBvD,GAAuC,CAC9DqD,EAA8BrD,EAAQ,CACrC,UAAW,IAAM,CAChB/E,EAAM,QAAQ,yBAAyB,CACxC,EACA,QAAUgB,GAAU,CACnB,MAAMC,EAAUD,EAAM,SAAW,sCACjCsD,EAAK,SAAS,OAAQ,CAAE,QAAArD,CAAA,CAAS,CAClC,EACA,UAAW,IAAM,CAChBqD,EAAK,MAAMR,CAAc,EACzBG,EAAA,CACD,CAAA,CACA,CACF,EAEA,OACC9D,EAAAA,IAACmF,GAAO,KAAI,GAAC,aAAAJ,EACZ,SAAA7E,EAAAA,KAACkF,EAAA,CAAc,mBAAkB,OAChC,SAAA,CAAApF,MAACqF,EAAA,CACA,SAAArF,EAAAA,IAACsF,EAAA,CAAY,SAAA,gCAAA,CAA8B,EAC5C,EAEAtF,EAAAA,IAACuF,GAAA,CAAM,GAAGpB,EACT,SAAAjE,EAAAA,KAAC,OAAA,CACA,SAAWuC,IAAW0B,EAAK,aAAagE,CAAc,EAAE1F,CAAC,GACzD,UAAU,YAEV,SAAA,CAAAzC,MAACwF,EAAA,CAAa,SAAArB,EAAK,UAAU,OAAO,MAAM,QAAQ,EAClDnE,EAAAA,IAACyF,EAAA,CACA,QAAStB,EAAK,QACd,KAAK,MACL,OAAQ,CAAC,CAAE,MAAAuB,CAAA,WACTC,EAAA,CACA,SAAA,CAAA3F,EAAAA,IAAC4F,GAAU,SAAA,KAAA,CAAG,EACd5F,EAAAA,IAAC6F,EAAA,CACA,SAAA7F,EAAAA,IAAC8F,EAAA,CAAM,KAAK,OAAO,aAAa,MAAO,GAAGJ,CAAA,CAAO,CAAA,CAClD,QACCF,EAAA,CAAA,CAAY,CAAA,CAAA,CACd,CAAA,CAAA,EAGFxF,EAAAA,IAACyF,EAAA,CACA,QAAStB,EAAK,QACd,KAAK,oBACL,OAAQ,CAAC,CAAE,MAAAuB,CAAA,WACTC,EAAA,CACA,SAAA,CAAA3F,EAAAA,IAAC4F,GAAU,SAAA,mBAAA,CAAiB,EAC5B5F,EAAAA,IAAC6F,GACA,SAAA7F,MAAC8F,EAAA,CAAM,KAAK,SAAU,GAAGJ,EAAO,CAAA,CACjC,QACCF,EAAA,CAAA,CAAY,CAAA,CAAA,CACd,CAAA,CAAA,SAGDO,EAAA,CACA,SAAA,CAAA/F,EAAAA,IAACgG,EAAA,CAAc,QAAO,GACrB,SAAAhG,EAAAA,IAACG,GAAO,QAAQ,UAAU,iBAAK,CAAA,CAChC,QACCA,EAAA,CAAO,KAAK,SAAS,QAASiG,EAAW,SAAA,KAAA,CAE1C,CAAA,CAAA,CACD,CAAA,CAAA,CAAA,CACD,CACD,CAAA,CAAA,CACD,CAAA,CACD,CAEF,EChHagC,GAAgC,CAAC,CAC7C,WAAA3B,EACA,cAAAC,EACA,aAAA3B,CACD,IAIM,CACL,KAAM,CAAE,OAAA4B,EAAQ,KAAAnF,CAAA,EAASiF,EACzB,OAAQE,EAAA,CACP,IAAK,SACJ,OACC3G,EAAAA,IAACgI,GAAA,CACA,aAAAjD,EACA,SAAU2B,CAAA,CAAA,EAGb,IAAK,QACJ,OACC1G,EAAAA,IAACqI,GAAA,CACA,KAAA7G,EACA,aAAAuD,EACA,QAAS2B,CAAA,CAAA,EAGZ,IAAK,SACJ,OACC1G,EAAAA,IAACsI,GAAA,CACA,KAAA9G,EACA,aAAAuD,EACA,SAAU2B,CAAA,CAAA,EAGb,QACC,OAAO,IAAA,CAEV,ECnCa6B,GAA+B,IAAM,CACjD,KAAM,CAAC9B,EAAYI,CAAa,EAAIC,WAAsB,CACzD,OAAQ,KACR,KAAM,MAAA,CACN,EAEK,CAAE,KAAAtF,CAAA,EAASgH,GAAA,EAEXxB,EAAe,IACpBH,EAAc,CAAE,OAAQ,SAAU,KAAM,OAAW,EAE9CK,EAAmB1F,GACxBqF,EAAc,CAAE,OAAQ,SAAU,KAAArF,EAAM,EAEnCiH,EAAkBjH,GACvBqF,EAAc,CAAE,OAAQ,QAAS,KAAArF,EAAM,EAElC2F,EAAoB,IACzBN,EAAc,CAAE,OAAQ,KAAM,KAAM,OAAW,EAG1CO,EAAoBC,GAAkB,CACtCA,GACJF,EAAA,CAEF,EAEA,OACCjH,EAAAA,KAAC,MAAA,CAAI,UAAU,sBACd,SAAA,CAAAF,EAAAA,IAAC+H,GAAA,CAA+B,MAAOf,CAAA,CAAc,EACpDxF,EAAK,SAAW,QACfsG,GAAA,CAAmC,MAAOd,EAAc,EAEzDhH,EAAAA,IAAC6H,GAAA,CACA,KAAArG,EACA,YAAa0F,EACb,WAAYuB,CAAA,CAAA,EAGdzI,EAAAA,IAACoI,GAAA,CACA,WAAA3B,EACA,cAAeU,EACf,aAAcC,CAAA,CAAA,CACf,EACD,CAEF,ECvDMlG,EAAWC,EAAY,sBAAsB,EAU7CuH,EAAmD,CACxD,OAAQ,CACP,eAAgB,SAChB,aAAc,QAAA,EAEf,WAAY,CACX,eAAgB,WAChB,aAAc,UAAA,CAEhB,EASaC,GAAwB,CAAC,CACrC,WAAAC,EACA,YAAAC,CACD,IAA+C,CAC9C,KAAM,CAAE,IAAAC,CAAA,EAAQ5H,EAAS,UAAA,EACnBO,EAAWP,EAAS,YAAA,EAE1B,OACChB,EAAAA,KAAC6I,GAAA,CAAK,aAAa,SAAS,MAAOD,EAClC,SAAA,CAAA5I,OAAC8I,GAAA,CACA,SAAA,CAAAhJ,EAAAA,IAACiJ,EAAA,CACA,MAAOP,EAAY,OAAO,eAC1B,QAAS,IAAM,CACTjH,EAAS,CACb,GAAI,sBACJ,OAAQ,CACP,IAAKiH,EAAY,OAAO,cAAA,CACzB,CACA,CACF,EAEC,WAAY,OAAO,YAAA,CAAA,EAErB1I,EAAAA,IAACiJ,EAAA,CACA,MAAOP,EAAY,UAAU,EAAE,eAC/B,QAAS,IAAM,CACTjH,EAAS,CACb,GAAI,sBACJ,OAAQ,CACP,IAAKiH,EAAY,UAAU,EAAE,cAAA,CAC9B,CACA,CACF,EAEC,SAAAA,EAAY,UAAU,EAAE,YAAA,CAAA,CAC1B,EACD,QACCQ,EAAA,CAAY,MAAOR,EAAY,OAAO,eACrC,SAAAE,EACF,QACCM,EAAA,CAAY,MAAOR,EAAY,UAAU,EAAE,eAC1C,SAAAG,CAAA,CACF,CAAA,EACD,CAEF,ECpEaM,GAAwB,IAEnCjJ,EAAAA,KAAC,MAAA,CAAI,UAAU,sBACd,SAAA,CAAAF,EAAAA,IAACoJ,GAAA,EAAsB,EACvBpJ,EAAAA,IAAC2I,GAAA,CACA,iBAAa/B,GAAA,EAA4B,EACzC,kBAAc2B,GAAA,CAAA,CAA6B,CAAA,CAAA,CAC5C,EACD,EAIIa,GAAwB,IAC7BpJ,EAAAA,IAACqJ,GAAA,CACA,SAAArJ,EAAAA,IAACsJ,GAAA,CACA,SAAAtJ,EAAAA,IAACuJ,GAAA,CAAe,UAAU,wBAAwB,SAAA,aAAA,CAElD,CAAA,CACD,EACD,ECjBoBC,EAAS,CAC7B9H,OAAQ8H,EAAEC,EAASC,SAAAA,EACnBZ,IAAKU,GAAO,CAAC,SAAU,UAAU,CAAC,EAAEG,QAAQ,QAAQ,CACrD,CAAC,EAE4D,MAAAC,GAZpDT"}